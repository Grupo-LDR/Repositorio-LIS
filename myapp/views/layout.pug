doctype html
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer")
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css")
  body
    block content
    script.
         const opcionesMenu = document.querySelectorAll('a.enlace');

         opcionesMenu.forEach((opcion) => {
          opcion.addEventListener('click', (e) => {
            e.preventDefault();
            const id = opcion.getAttribute('id');
            fetch(`/main/${id}`)
              .then((response) => response.text())
              .then((data) => {
                document.querySelector('#contenido-derecho').innerHTML = data;
                nuevosEnlaces();
              });
          });
         });

         function nuevosEnlaces(){ 
         const linksUsuarios = document.querySelectorAll('.enlace-usuario');
         linksUsuarios.forEach((enlace) => {
          enlace.addEventListener('click', (e) => {
            e.preventDefault();
            const id = enlace.getAttribute('id');
            fetch(`/main/patient/${id}`)
              .then((response) => response.text())
              .then((data) => {
                document.querySelector('#contenido-derecho').innerHTML = data;
                nuevosEnlacesUpdate();
              });
          });
         });
         
         function nuevosEnlacesUpdate(){ 
         const updates = document.querySelectorAll('a.update2');
         const register = document.querySelectorAll('a.enlaceReg')
         let inputDni = document.getElementById("dni");
         let inputfirstName = document.getElementById("firstName");
         let inputlastName = document.getElementById("lastName");
         let inputphone = document.getElementById("phone");
         let inputemail = document.getElementById("email");
         let inputgenre = document.getElementById("genre");
         let inputpassword = document.getElementById("password");
         let inputlocation = document.getElementById("location");

         updates.forEach((opcion) => {
          opcion.addEventListener('click', (e) => {
            e.preventDefault();
            const id = opcion.getAttribute('id');
            fetch(`/main/patient/${id}`)
              .then((response) => response.text())
              .then((data) => {
                document.querySelector('#contenido-derecho').innerHTML = data;
                nuevosEnlaces();
              });
          });
         });

         register.forEach((opcion) => {
          opcion.addEventListener('click', (e) => {
            e.preventDefault();
            let user ={
              first_name: inputfirstName.value,
              last_name: inputlastName.value,
              gender: inputgenre.value,
              active: true,
              dni: inputDni.value,
              phone: inputphone.value,
              email: inputemail.value,
              adress:"",
              password: inputpassword.value,
              location: inputlocation.value,
            }
         fetch("/registrarUser", {
         headers: {
          "Content-Type": "application/json",
         },
         method: "post",
         body: JSON.stringify(user),
        })
        .then((response) => {
          if (!response.ok) {
            throw new Error("Error en la solicitud");
          }
          })})})
         }
         }
    
