 const contenido = document.getElementById('contenido'); const menu = document.getElementsByClassName('menu-link'); contenido.innerHTML = `Hola Mundo`; Array.from(menu).forEach(element => { console.log(element.textContent); element.addEventListener('click', async function (event) { event.preventDefault(); await consultaLink(element.id); switch (element.id.substring(1)) { case 'user': userList(); break; } }); }); async function consultaLink(menuLink) { try { const response = await fetch(`http://localhost:8082${menuLink}`); const data = await response.text(); contenido.innerHTML = data; userEdit = document.querySelectorAll('.userEdit'); userOrder = document.querySelectorAll('.userOrder'); userOrders = document.querySelectorAll('.userOrders'); } catch (error) { console.error('Error en consultaLink:', error); } } function userList() { var table = $('#usersTable').DataTable({ "responsive": true, "autoWidth": false, "paging": true, "lengthChange": true, "searching": true, "ordering": true, "info": true, "autoWidth": true, "language": { "search": "Buscar:", "searchPlaceholder": "Escribe para buscar", "lengthMenu": "Mostrar _MENU_ entradas por página", "info": "Mostrando _START_ a _END_ de _TOTAL_ entradas", "infoEmpty": "No se encontraron entradas", "infoFiltered": "(filtrado de un total de _MAX_ entradas)", "zeroRecords": "No se encontraron registros coincidentes", "emptyTable": "La tabla está vacía", "paginate": { "first": "Primero", "previous": "Anterior", "next": "Siguiente", "last": "Último" } } }); userListEventosIcon(); } function userListEventosIcon() { document.addEventListener('click', function (event) { const accion = event.target.getAttribute('accion'); if (accion) { const userId = event.target.getAttribute('name'); switch (accion) { case 'editUser': editUserClick(userId); break; case 'newOrderUser': newOrderUserClick(userId); break; case 'viewOrdersUser': viewOrdersUserClick(userId); break; } } }); } /** * manejador edicion usuario * @param {*} userId */ function editUserClick(userId) { console.log('Edit userId:', userId); accionEventoUser(`./user/edit/${userId}`); } /** * manejador nueva orden * @param {*} userId */ function newOrderUserClick(userId) { console.log('Order userId:', userId); accionEventoUser(`./user/order/new/${userId}`); } /** * manejador ordenes usuraio * @param {*} userId */ function viewOrdersUserClick(userId) { console.log('View userId:', userId); accionEventoUser(`./user/order/list/${userId}`); } /** * manejador ventnas emergentes * @param {*} link * */ function accionEventoUser(link) { const pantallaAncho = window.screen.availWidth; const pantallaALto = window.screen.availHeight; const anchoVentana = 60; const altoVentna = 60; const ventanaAncho = (pantallaAncho * anchoVentana) / 100; const ventanaAlto = (pantallaALto * altoVentna) / 100; const top = (pantallaALto / 2) - (ventanaAlto / 2); const left = (pantallaAncho / 2) - (ventanaAncho / 2); window.open(`/${link}`, "blank", `toolbar=no, width=${ventanaAncho}, height=${ventanaAlto}, top=${top}, left=${left}, scrollbars=no`); } 